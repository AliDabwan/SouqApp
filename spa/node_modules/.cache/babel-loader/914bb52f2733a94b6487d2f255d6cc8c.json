{"ast":null,"code":"import { get as r, set as i } from \"react-hook-form\";\n\nvar e = function (i, e, t) {\n  if (i && \"reportValidity\" in i) {\n    var f = r(t, e);\n    i.setCustomValidity(f && f.message || \"\"), i.reportValidity();\n  }\n},\n    t = function (r, i) {\n  var t = function (t) {\n    var f = i.fields[t];\n    f && f.ref && \"reportValidity\" in f.ref ? e(f.ref, t, r) : f.refs && f.refs.forEach(function (i) {\n      return e(i, t, r);\n    });\n  };\n\n  for (var f in i.fields) t(f);\n},\n    f = function (e, f) {\n  f.shouldUseNativeValidation && t(e, f);\n  var o = {};\n\n  for (var a in e) {\n    var n = r(f.fields, a);\n    i(o, a, Object.assign(e[a] || {}, {\n      ref: n && n.ref\n    }));\n  }\n\n  return o;\n};\n\nexport { f as toNestError, t as validateFieldsNatively };","map":{"version":3,"sources":["../src/validateFieldsNatively.ts","../src/toNestError.ts"],"names":["setCustomValidity","ref","fieldPath","errors","error","get","message","reportValidity","validateFieldsNatively","options","fields","_loop","field","refs","forEach","toNestError","shouldUseNativeValidation","fieldErrors","path","set","Object","assign"],"mappings":";;AASA,IAAMA,CAAAA,GAAoB,UACxBC,CADwB,EAExBC,CAFwB,EAGxBC,CAHwB,EAGxBA;AAEA,MAAIF,CAAAA,IAAO,oBAAoBA,CAA/B,EAAoC;AAClC,QAAMG,CAAAA,GAAQC,CAAAA,CAAIF,CAAJE,EAAYH,CAAZG,CAAd;AACAJ,IAAAA,CAAAA,CAAID,iBAAJC,CAAuBG,CAAAA,IAASA,CAAAA,CAAME,OAAfF,IAA2B,EAAlDH,GAEAA,CAAAA,CAAIM,cAAJN,EAFAA;AAIJ;AAAA,CAXA;AAAA,IAcaO,CAAAA,GAAyB,UACpCL,CADoC,EAEpCM,CAFoC,EAEpCA;AACQ,MAAA,CAAA,GAAA,UAAA,CAAA,EAAA;AAEN,QAAMG,CAAAA,GAAQH,CAAAA,CAAQC,MAARD,CAAeP,CAAfO,CAAd;AACIG,IAAAA,CAAAA,IAASA,CAAAA,CAAMX,GAAfW,IAAsB,oBAAoBA,CAAAA,CAAMX,GAAhDW,GACFZ,CAAAA,CAAkBY,CAAAA,CAAMX,GAAxBD,EAA6BE,CAA7BF,EAAwCG,CAAxCH,CADEY,GAEOA,CAAAA,CAAMC,IAAND,IACTA,CAAAA,CAAMC,IAAND,CAAWE,OAAXF,CAAmB,UAACX,CAAD,EAACA;AAAqB,aACvCD,CAAAA,CAAkBC,CAAlBD,EAAuBE,CAAvBF,EAAkCG,CAAlCH,CADuC;AACE,KAD3CY,CAHEA;AAOL,GAVO;;AACR,OAAK,IAAMV,CAAX,IAAwBO,CAAAA,CAAQC,MAAhC,EAAsCC,CAAAA,CAAAA,CAAAA,CAAAA;AAUxC,CA5BA;AAAA,ICCaI,CAAAA,GAAc,UACzBZ,CADyB,EAEzBM,CAFyB,EAEzBA;AAEAA,EAAAA,CAAAA,CAAQO,yBAARP,IAAqCD,CAAAA,CAAuBL,CAAvBK,EAA+BC,CAA/BD,CAArCC;AAEA,MAAMQ,CAAAA,GAAc,EAApB;;AACA,OAAK,IAAMC,CAAX,IAAmBf,CAAnB,EAA2B;AACzB,QAAMS,CAAAA,GAAQP,CAAAA,CAAII,CAAAA,CAAQC,MAAZL,EAAoBa,CAApBb,CAAd;AAEAc,IAAAA,CAAAA,CACEF,CADFE,EAEED,CAFFC,EAGEC,MAAAA,CAAOC,MAAPD,CAAcjB,CAAAA,CAAOe,CAAPf,CAAAA,IAAgB,EAA9BiB,EAAkC;AAAEnB,MAAAA,GAAAA,EAAKW,CAAAA,IAASA,CAAAA,CAAMX;AAAtB,KAAlCmB,CAHFD,CAAAA;AAOF;;AAAA,SAAOF,CAAP;AACF,CDnBA;;ACmBA,SAAA,CAAA,IAAA,WAAA,EAAA,CAAA,IAAA,sBAAA","sourcesContent":["import {\n  get,\n  FieldError,\n  ResolverOptions,\n  Ref,\n  FieldErrors,\n  FieldValues,\n} from 'react-hook-form';\n\nconst setCustomValidity = (\n  ref: Ref,\n  fieldPath: string,\n  errors: FieldErrors,\n) => {\n  if (ref && 'reportValidity' in ref) {\n    const error = get(errors, fieldPath) as FieldError | undefined;\n    ref.setCustomValidity((error && error.message) || '');\n\n    ref.reportValidity();\n  }\n};\n\n// Native validation (web only)\nexport const validateFieldsNatively = <TFieldValues extends FieldValues>(\n  errors: FieldErrors,\n  options: ResolverOptions<TFieldValues>,\n): void => {\n  for (const fieldPath in options.fields) {\n    const field = options.fields[fieldPath];\n    if (field && field.ref && 'reportValidity' in field.ref) {\n      setCustomValidity(field.ref, fieldPath, errors);\n    } else if (field.refs) {\n      field.refs.forEach((ref: HTMLInputElement) =>\n        setCustomValidity(ref, fieldPath, errors),\n      );\n    }\n  }\n};\n","import {\n  set,\n  get,\n  FieldErrors,\n  Field,\n  ResolverOptions,\n  FieldValues,\n} from 'react-hook-form';\nimport { validateFieldsNatively } from './validateFieldsNatively';\n\nexport const toNestError = <TFieldValues extends FieldValues>(\n  errors: FieldErrors,\n  options: ResolverOptions<TFieldValues>,\n): FieldErrors<TFieldValues> => {\n  options.shouldUseNativeValidation && validateFieldsNatively(errors, options);\n\n  const fieldErrors = {} as FieldErrors<TFieldValues>;\n  for (const path in errors) {\n    const field = get(options.fields, path) as Field['_f'] | undefined;\n\n    set(\n      fieldErrors,\n      path,\n      Object.assign(errors[path] || {}, { ref: field && field.ref }),\n    );\n  }\n\n  return fieldErrors;\n};\n"]},"metadata":{},"sourceType":"module"}