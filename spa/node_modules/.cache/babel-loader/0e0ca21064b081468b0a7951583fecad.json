{"ast":null,"code":"import _objectSpread from\"D:/Learn/react/SouqApp/spa/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Learn/react/SouqApp/spa/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Learn/react/SouqApp/spa/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Avatar from'@mui/material/Avatar';import TextField from'@mui/material/TextField';import Grid from'@mui/material/Grid';import Box from'@mui/material/Box';import LockOutlinedIcon from'@mui/icons-material/LockOutlined';import Typography from'@mui/material/Typography';import Container from'@mui/material/Container';import{Paper}from'@mui/material';import{Link,useLocation,useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{LoadingButton}from'@mui/lab';import{useAppDispatch,useAppSelector}from'../../app/store/configureStore';import{SingInUser}from'./accountSlice';import{useEffect}from'react';// function Copyright(props: any) {\n//   return (\n//     <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\n//       {'Copyright © '}\n//       <Link color=\"inherit\" href=\"https://mui.com/\">\n//         Your Website\n//       </Link>{' '}\n//       {new Date().getFullYear()}\n//       {'.'}\n//     </Typography>\n//   );\n// }\n// TODO remove, this demo shouldn't need to reset the theme.\n// const defaultTheme = createTheme();\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _location$state3,_location$state3$from,_errors$username,_errors$password;var _useAppSelector=useAppSelector(function(state){return state.account;}),user=_useAppSelector.user;var dispach=useAppDispatch();var navigate=useNavigate();var location=useLocation();var _useForm=useForm({mode:'all'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,isSubmitting=_useForm$formState.isSubmitting,isValid=_useForm$formState.isValid,errors=_useForm$formState.errors;var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return dispach(SingInUser(data)).then(function(data){if(!(data.meta.requestStatus==='rejected')){var _location$state,_location$state$from;navigate(((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'../');}});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function submitForm(_x){return _ref.apply(this,arguments);};}();useEffect(function(){var _location$state2,_location$state2$from;if(user)navigate(((_location$state2=location.state)===null||_location$state2===void 0?void 0:(_location$state2$from=_location$state2.from)===null||_location$state2$from===void 0?void 0:_location$state2$from.pathname)||'../');},[user,navigate,(_location$state3=location.state)===null||_location$state3===void 0?void 0:(_location$state3$from=_location$state3.from)===null||_location$state3$from===void 0?void 0:_location$state3$from.pathname]);// const [values,setValuse]=React.useState({\n//     username:'',\n//     password:''\n// });\n//   const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n//     event.preventDefault();\n//     agent.Account.login(values);\n//     //read data from  controls###\n//     // const data = new FormData(event.currentTarget);\n//     // console.log({\n//     //   email: data.get('email'),\n//     //   password: data.get('password'),\n//     // });\n//   };\n//   const handleInputChange=(event:any)=>{\n//     const {name,value}=event.target;\n//     setValuse({...values,[name]:value});\n//   }\nreturn/*#__PURE__*/ (// <ThemeProvider theme={defaultTheme}>\n_jsx(Container,{component:Paper,maxWidth:\"sm\",children:/*#__PURE__*/_jsxs(Box,{sx:{marginTop:20,p:3,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'primary.main'},children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit(submitForm),noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({margin:\"normal\"//   required\n,fullWidth:true,label:\"Username\"//   autoComplete=\"email\"\n,autoFocus:true//   onChange={handleInputChange}\n//   value={values.username}\n},register('username',{required:true})),{},{error:!!errors.username,helperText:errors===null||errors===void 0?void 0:(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.message})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({margin:\"normal\"//   required\n,fullWidth:true//   name=\"password\"\n,label:\"Password\",type:\"password\"},register('password',{required:'كلمة المرور مطلوبة'})),{},{error:!!errors.password,helperText:errors===null||errors===void 0?void 0:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message//   autoComplete=\"current-password\"\n//   onChange={handleInputChange}\n//   value={values.password}\n})),/*#__PURE__*/_jsx(LoadingButton,{disabled:!isValid,loading:isSubmitting,type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Sign In\"}),/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{component:Link,to:\"../register\",sx:{fontWeight:'bold',color:'primary.main',textDecoration:'none'},children:\"Don't have an account? Sign Up\"})})})]})]})})// { </ThemeProvider> }\n);}","map":{"version":3,"sources":["D:/Learn/react/SouqApp/spa/src/features/account/Login.tsx"],"names":["Avatar","TextField","Grid","Box","LockOutlinedIcon","Typography","Container","Paper","Link","useLocation","useNavigate","useForm","LoadingButton","useAppDispatch","useAppSelector","SingInUser","useEffect","Login","state","account","user","dispach","navigate","location","mode","register","handleSubmit","formState","isSubmitting","isValid","errors","submitForm","data","then","meta","requestStatus","from","pathname","console","log","marginTop","p","display","flexDirection","alignItems","m","bgcolor","mt","required","username","message","password","mb","fontWeight","color","textDecoration"],"mappings":"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","sourcesContent":["import Avatar from '@mui/material/Avatar';\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { Paper } from '@mui/material';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { FieldValues, useForm } from 'react-hook-form';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { SingInUser } from './accountSlice';\r\nimport { useEffect } from 'react';\r\n\r\n// function Copyright(props: any) {\r\n//   return (\r\n//     <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\r\n//       {'Copyright © '}\r\n//       <Link color=\"inherit\" href=\"https://mui.com/\">\r\n//         Your Website\r\n//       </Link>{' '}\r\n//       {new Date().getFullYear()}\r\n//       {'.'}\r\n//     </Typography>\r\n//   );\r\n// }\r\n\r\n// TODO remove, this demo shouldn't need to reset the theme.\r\n// const defaultTheme = createTheme();\r\n\r\nexport default function Login() {\r\n    const {user}=useAppSelector(state=>state.account);\r\n\r\n    const dispach=useAppDispatch();\r\n    const navigate=useNavigate();\r\n    const location=useLocation();\r\n\r\n    const {register,handleSubmit,formState:{isSubmitting,isValid,errors}}=useForm({\r\n        mode:'all'\r\n    });\r\n\r\n    const submitForm=async(data:FieldValues)=>{\r\n        try {\r\n            // await agent.Account.login(data);//.catch(error => console.log(error));\r\n\r\n            await dispach(SingInUser(data)).then(data=>{\r\n                if(!(data.meta.requestStatus==='rejected')){\r\n\r\n                    navigate(location.state?.from?.pathname||'../');\r\n\r\n                }\r\n\r\n            });\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n      if(user) navigate(location.state?.from?.pathname||'../');\r\n\r\n    }, [user,navigate,location.state?.from?.pathname])\r\n    \r\n\r\n    // const [values,setValuse]=React.useState({\r\n    //     username:'',\r\n    //     password:''\r\n    // });\r\n\r\n\r\n//   const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n//     event.preventDefault();\r\n//     agent.Account.login(values);\r\n\r\n\r\n\r\n\r\n//     //read data from  controls###\r\n//     // const data = new FormData(event.currentTarget);\r\n//     // console.log({\r\n//     //   email: data.get('email'),\r\n//     //   password: data.get('password'),\r\n//     // });\r\n//   };\r\n\r\n//   const handleInputChange=(event:any)=>{\r\n//     const {name,value}=event.target;\r\n\r\n//     setValuse({...values,[name]:value});\r\n//   }\r\n\r\n  return (\r\n    // <ThemeProvider theme={defaultTheme}>\r\n      <Container component={Paper} maxWidth=\"sm\">\r\n        {/* <CssBaseline /> */}\r\n        <Box\r\n          sx={{\r\n            marginTop: 20,\r\n            p:3,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <Avatar sx={{ m: 1, bgcolor: 'primary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <Box component=\"form\" onSubmit={handleSubmit(submitForm)} noValidate sx={{ mt: 1 }}>\r\n            <TextField\r\n              margin=\"normal\"\r\n            //   required\r\n              fullWidth\r\n              label=\"Username\"\r\n            //   autoComplete=\"email\"\r\n              autoFocus\r\n            //   onChange={handleInputChange}\r\n            //   value={values.username}\r\n            {...register('username',{required:true})}\r\n            error={!!errors.username}\r\n            helperText={errors?.username?.message}\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n            //   required\r\n              fullWidth\r\n            //   name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              {...register('password',{required:'كلمة المرور مطلوبة'})}\r\n              error={!!errors.password}\r\n              helperText={errors?.password?.message}\r\n\r\n\r\n\r\n            //   autoComplete=\"current-password\"\r\n            //   onChange={handleInputChange}\r\n            //   value={values.password}\r\n            />\r\n            {/* <FormControlLabel\r\n              control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n              label=\"Remember me\"\r\n            /> */}\r\n            <LoadingButton\r\n            disabled={!isValid}\r\n            loading={isSubmitting}\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Sign In\r\n            </LoadingButton>\r\n            <Grid container>\r\n              {/* <Grid item xs>\r\n                <Link href=\"#\" variant=\"body2\">\r\n                  Forgot password?\r\n                </Link>\r\n              </Grid> */}\r\n              <Grid item>\r\n                <Typography \r\n                component={Link}\r\n                to={\"../register\"}\r\n               sx={{fontWeight:'bold',color:'primary.main',textDecoration:'none'}}\r\n                >\r\n                  {\"Don't have an account? Sign Up\"}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Box>\r\n        {/* <Copyright sx={{ mt: 8, mb: 4 }} /> */}\r\n      </Container>\r\n    // { </ThemeProvider> }\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}