{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ali\\\\react\\\\SouqApp\\\\spa\\\\src\\\\app\\\\context\\\\SouqContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SouqContext = /*#__PURE__*/createContext(undefined); //the provider\n\nexport const useSouqContext = () => {\n  _s();\n\n  const context = useContext(SouqContext);\n  if (context === undefined) throw Error('No Souq Provider avvail');\n  return context;\n}; //children is any component in app \n\n_s(useSouqContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport const SouqProvider = _ref => {\n  _s2();\n\n  let {\n    children\n  } = _ref;\n  const [basket, setBasket] = useState(null);\n\n  const removeItem = (productId, quantity) => {\n    if (!basket) return; // take copy to edit\n\n    const items = [...basket.items]; //get item from index that will be removed\n\n    const itemIndex = items.findIndex(i => i.productId === productId);\n\n    if (itemIndex >= 0) {\n      items[itemIndex].quantity -= quantity;\n      if (items[itemIndex].quantity === 0) items.splice(itemIndex, 1);\n      setBasket(prevState => {\n        return { ...prevState,\n          items\n        };\n      }); // update prev state from new copy\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(SouqContext.Provider, {\n    value: {\n      basket,\n      setBasket,\n      removeItem\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(SouqProvider, \"6sXALPV33nKSmlKdeB1CvsMyOVU=\");\n\n_c = SouqProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"SouqProvider\");","map":{"version":3,"sources":["D:/Ali/react/SouqApp/spa/src/app/context/SouqContext.tsx"],"names":["createContext","useContext","useState","SouqContext","undefined","useSouqContext","context","Error","SouqProvider","children","basket","setBasket","removeItem","productId","quantity","items","itemIndex","findIndex","i","splice","prevState"],"mappings":";;;;AAAA,SAA4BA,aAA5B,EAA2CC,UAA3C,EAAuDC,QAAvD,QAAuE,OAAvE;;AASA,OAAO,MAAMC,WAAW,gBAACH,aAAa,CAA6BI,SAA7B,CAA/B,C,CAEP;;AACA,OAAO,MAAMC,cAAc,GAAC,MAAI;AAAA;;AAC5B,QAAMC,OAAO,GAACL,UAAU,CAACE,WAAD,CAAxB;AACA,MAAGG,OAAO,KAAGF,SAAb,EAAuB,MAAMG,KAAK,CAAC,yBAAD,CAAX;AACvB,SAAOD,OAAP;AAEH,CALM,C,CAOP;;GAPaD,c;;AAQb,OAAO,MAAMG,YAAY,GAAC,QAAqC;AAAA;;AAAA,MAApC;AAACC,IAAAA;AAAD,GAAoC;AAG3D,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAAc,IAAd,CAApC;;AAEA,QAAMU,UAAU,GAAC,CAACC,SAAD,EAAkBC,QAAlB,KAAoC;AACjD,QAAG,CAACJ,MAAJ,EAAW,OADsC,CAEjD;;AACA,UAAMK,KAAK,GAAC,CAAC,GAAGL,MAAM,CAACK,KAAX,CAAZ,CAHiD,CAIjD;;AACA,UAAMC,SAAS,GAACD,KAAK,CAACE,SAAN,CAAgBC,CAAC,IAAEA,CAAC,CAACL,SAAF,KAAcA,SAAjC,CAAhB;;AACA,QAAGG,SAAS,IAAE,CAAd,EAAgB;AACZD,MAAAA,KAAK,CAACC,SAAD,CAAL,CAAiBF,QAAjB,IAA2BA,QAA3B;AACA,UAAGC,KAAK,CAACC,SAAD,CAAL,CAAiBF,QAAjB,KAA4B,CAA/B,EAAiCC,KAAK,CAACI,MAAN,CAAaH,SAAb,EAAuB,CAAvB;AAEjCL,MAAAA,SAAS,CAACS,SAAS,IAAE;AAAC,eAAM,EAAC,GAAGA,SAAJ;AAAeL,UAAAA;AAAf,SAAN;AAA4B,OAAzC,CAAT,CAJY,CAKZ;AACH;AACJ,GAbD;;AAeA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAACL,MAAAA,MAAD;AAAQC,MAAAA,SAAR;AAAkBC,MAAAA;AAAlB,KAA7B;AAAA,cAEKH;AAFL;AAAA;AAAA;AAAA;AAAA,UADJ;AAMH,CA1BM;;IAAMD,Y;;KAAAA,Y","sourcesContent":["import { PropsWithChildren, createContext, useContext, useState } from \"react\";\r\nimport { Basket } from \"../models/basket\";\r\n\r\ninterface SouqContextValue{\r\n    basket:Basket|null;\r\n    setBasket:(basket:Basket)=>void;\r\n    removeItem:(productId:number,quantity:number)=>void;\r\n}\r\n\r\nexport const SouqContext=createContext<SouqContextValue|undefined>(undefined);\r\n\r\n//the provider\r\nexport const useSouqContext=()=>{\r\n    const context=useContext(SouqContext);\r\n    if(context===undefined)throw Error('No Souq Provider avvail');\r\n    return context;\r\n\r\n}\r\n\r\n//children is any component in app \r\nexport const SouqProvider=({children}:PropsWithChildren<any>)=>{\r\n\r\n    \r\n    const [basket, setBasket] = useState<Basket|null>(null);\r\n\r\n    const removeItem=(productId:number,quantity:number)=>{\r\n        if(!basket)return;\r\n        // take copy to edit\r\n        const items=[...basket.items];\r\n        //get item from index that will be removed\r\n        const itemIndex=items.findIndex(i=>i.productId===productId);\r\n        if(itemIndex>=0){\r\n            items[itemIndex].quantity-=quantity;\r\n            if(items[itemIndex].quantity===0)items.splice(itemIndex,1);\r\n\r\n            setBasket(prevState=>{return{...prevState!,items}});\r\n            // update prev state from new copy\r\n        }\r\n    }\r\n\r\n    return (\r\n        <SouqContext.Provider value={{basket,setBasket,removeItem}}>\r\n            {/* any components in the  app is by  use  word above */}\r\n            {children}\r\n        </SouqContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}