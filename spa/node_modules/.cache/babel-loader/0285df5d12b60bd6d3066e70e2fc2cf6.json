{"ast":null,"code":"import _slicedToArray from\"D:/Learn/react/SouqApp/spa/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Edit,Delete}from\"@mui/icons-material\";import{Box,Typography,Button,TableContainer,Paper,Table,TableHead,TableRow,TableCell,TableBody}from\"@mui/material\";import AppPagination from\"../../app/components/AppPagination\";import{currencyFormat}from\"../../app/helper/helper\";import Loader from\"../../app/layout/Loader\";import{useAppDispatch}from\"../../app/store/configureStore\";import{removeProduct,setPageNumber}from\"../catalog/catalogSlice\";import useProducts from\"../../app/hooks/useProducts\";import{useState}from\"react\";import ProductForm from\"./ProductForm\";import agent from\"../../app/api/agent\";import{LoadingButton}from\"@mui/lab\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Inventory(){var _useProducts=useProducts(),products=_useProducts.products,productsLoaded=_useProducts.productsLoaded,paginationData=_useProducts.paginationData;var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editMode=_useState2[0],setEditMode=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),selectedProduct=_useState4[0],setSelectedProduct=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),target=_useState8[0],setTarget=_useState8[1];var handleSelectProduct=function handleSelectProduct(product){setSelectedProduct(product);setEditMode(true);};var handleDeleteProduct=function handleDeleteProduct(id){setLoading(true);setTarget(id);agent.Admin.deleteProduct(id).then(function(){dispatch(removeProduct(id));dispatch(setPageNumber({pageNumber:1}));}).catch(function(error){return console.log(error);}).finally(function(){return setLoading(false);});};var cancelEdit=function cancelEdit(){if(selectedProduct)setSelectedProduct(undefined);setEditMode(false);};if(editMode)return/*#__PURE__*/_jsx(ProductForm,{product:selectedProduct,cancelEdit:cancelEdit});if(!productsLoaded)return/*#__PURE__*/_jsx(Loader,{message:\"Loading Products...\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Typography,{sx:{p:2},variant:\"h4\",children:\"Inventory\"}),/*#__PURE__*/_jsx(Button,{sx:{m:2},onClick:function onClick(){return setEditMode(true);},size:\"large\",variant:\"contained\",children:\"Create\"})]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Product\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Type\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Brand\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Quantity\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:products.map(function(product){return/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.pictureUrl,alt:product.name,style:{height:50,marginRight:20}}),/*#__PURE__*/_jsx(\"span\",{children:product.name})]})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:currencyFormat(product.price)}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.type}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.brand}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.quantityInStock}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleSelectProduct(product);},startIcon:/*#__PURE__*/_jsx(Edit,{})}),/*#__PURE__*/_jsx(LoadingButton,{loading:loading&&target===product.id,onClick:function onClick(){return handleDeleteProduct(product.id);},startIcon:/*#__PURE__*/_jsx(Delete,{}),color:\"error\"})]})]},product.id);})})]})}),paginationData&&/*#__PURE__*/_jsx(Box,{sx:{pt:2},children:/*#__PURE__*/_jsx(AppPagination,{paginationData:paginationData,onPageChange:function onPageChange(page){return dispatch(setPageNumber({pageNumber:page}));}})})]});}","map":{"version":3,"sources":["D:/Learn/react/SouqApp/spa/src/features/admin/Inventory.tsx"],"names":["Edit","Delete","Box","Typography","Button","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","AppPagination","currencyFormat","Loader","useAppDispatch","removeProduct","setPageNumber","useProducts","useState","ProductForm","agent","LoadingButton","Inventory","products","productsLoaded","paginationData","dispatch","editMode","setEditMode","undefined","selectedProduct","setSelectedProduct","loading","setLoading","target","setTarget","handleSelectProduct","product","handleDeleteProduct","id","Admin","deleteProduct","then","pageNumber","catch","error","console","log","finally","cancelEdit","p","m","minWidth","map","border","pictureUrl","name","height","marginRight","price","type","brand","quantityInStock","pt","page"],"mappings":"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","sourcesContent":["import { Edit, Delete } from \"@mui/icons-material\";\r\nimport { Box, Typography, Button, TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody } from \"@mui/material\";\r\nimport AppPagination from \"../../app/components/AppPagination\";\r\nimport { currencyFormat } from \"../../app/helper/helper\";\r\nimport Loader from \"../../app/layout/Loader\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { removeProduct, setPageNumber } from \"../catalog/catalogSlice\";\r\nimport useProducts from \"../../app/hooks/useProducts\";\r\nimport { useState } from \"react\";\r\nimport ProductForm from \"./ProductForm\";\r\nimport { Product } from \"../../app/models/product\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\n\r\nexport default function Inventory() {\r\n\r\n    const {products,productsLoaded,paginationData}=useProducts();\r\n\r\n       const dispatch = useAppDispatch();\r\n\r\n       const [editMode,setEditMode]=useState(false);\r\n       const [selectedProduct,setSelectedProduct]=useState<Product|undefined>(undefined);\r\n       const [loading,setLoading]=useState(false);\r\n       const [target,setTarget]=useState(0);\r\n\r\n\r\n       const handleSelectProduct=(product:Product)=>{\r\n        setSelectedProduct(product);\r\n        setEditMode(true);\r\n       }\r\n\r\n        const handleDeleteProduct=(id:number)=>{\r\n            setLoading(true);\r\n            setTarget(id);\r\n            agent.Admin.deleteProduct(id)\r\n            .then(\r\n                ()=>{\r\n                    dispatch(removeProduct(id));\r\n                    dispatch(setPageNumber({pageNumber:1}))\r\n                }\r\n            )\r\n            .catch(error=>console.log(error))\r\n            .finally(()=>setLoading(false))\r\n        }\r\n\r\n       const cancelEdit=()=>{\r\n        if(selectedProduct) setSelectedProduct(undefined);\r\n        setEditMode(false);\r\n\r\n\r\n       }\r\n       if(editMode)return <ProductForm product={selectedProduct} cancelEdit={cancelEdit}/>\r\n\r\n    if (!productsLoaded) return <Loader message='Loading Products...' />\r\n    return (\r\n        <>\r\n            <Box display='flex' justifyContent='space-between'>\r\n                <Typography sx={{ p: 2 }} variant='h4'>Inventory</Typography>\r\n                <Button sx={{ m: 2 }} onClick={()=>setEditMode(true)} size='large' variant='contained'>Create</Button>\r\n            </Box>\r\n            <TableContainer component={Paper}>\r\n                <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            {/* <TableCell>#</TableCell> */}\r\n                            <TableCell align=\"left\">Product</TableCell>\r\n                            <TableCell align=\"center\">Price</TableCell>\r\n                            <TableCell align=\"center\">Type</TableCell>\r\n                            <TableCell align=\"center\">Brand</TableCell>\r\n                            <TableCell align=\"center\">Quantity</TableCell>\r\n                            <TableCell align=\"right\"></TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {products.map((product) => (\r\n                            <TableRow\r\n                                key={product.id}\r\n                                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n                            >\r\n                                {/* <TableCell component=\"th\" scope=\"row\">\r\n                                    {product.id}\r\n                                </TableCell> */}\r\n                                <TableCell align=\"left\">\r\n                                    <Box display='flex' alignItems='center'>\r\n                                        <img src={product.pictureUrl} alt={product.name} style={{ height: 50, marginRight: 20 }} />\r\n                                        <span>{product.name}</span>\r\n                                    </Box>\r\n                                </TableCell>\r\n                                <TableCell align=\"center\">{currencyFormat(product.price)}</TableCell>\r\n                                <TableCell align=\"center\">{product.type}</TableCell>\r\n                                <TableCell align=\"center\">{product.brand}</TableCell>\r\n                                <TableCell align=\"center\">{product.quantityInStock}</TableCell>\r\n                                <TableCell align=\"right\">\r\n                                    <Button onClick={()=>handleSelectProduct(product)} startIcon={<Edit/>} />\r\n                                    <LoadingButton loading={loading && target===product.id}\r\n                                    onClick={()=>handleDeleteProduct(product.id)}\r\n                                    startIcon={<Delete />} color='error' />\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n            {paginationData &&\r\n                <Box sx={{ pt: 2 }}>\r\n                    <AppPagination\r\n                        paginationData={paginationData}\r\n                        onPageChange={(page: number) => dispatch(setPageNumber({ pageNumber: page }))}\r\n                    />\r\n                </Box>\r\n            }\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}