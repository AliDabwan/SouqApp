{"ast":null,"code":"import _slicedToArray from\"D:/Learn/react/SouqApp/spa/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Elements}from\"@stripe/react-stripe-js\";import{loadStripe}from\"@stripe/stripe-js\";import CheckoutPage from\"./CheckoutPage\";import{useAppDispatch,useAppSelector}from\"../../app/store/configureStore\";import{useEffect,useState}from\"react\";import agent from\"../../app/api/agent\";import{setBasket}from\"../basket/basketSlice\";import Loader from\"../../app/layout/Loader\";import{history}from\"../..\";import{jsx as _jsx}from\"react/jsx-runtime\";var stripePromise=loadStripe('pk_test_51NLvadLRCdXbPQVRmp4hVGpvcZFMegnlrLgyVKkMZMVeLAFQqvhjEqfYZv0rwrKV2JmnYZLstWwaKqXxkXB0zliB00a2rpjr3s');export default function CheckoutWrapper(){var dispatch=useAppDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useAppSelector=useAppSelector(function(state){return state.basket;}),basket=_useAppSelector.basket;useEffect(function(){if(!basket||basket.items.length===0){history.push('../login');return;}agent.Payment.createPaymentIntent().then(function(basket){return dispatch(setBasket(basket));}).catch(function(error){return console.log(error);}).finally(function(){return setLoading(false);});//eslint-disable-next-line\n},[dispatch]);if(loading)return/*#__PURE__*/_jsx(Loader,{message:\"Loading check out\"});return/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutPage,{})});}","map":{"version":3,"sources":["D:/Learn/react/SouqApp/spa/src/features/checkout/CheckoutWrapper.tsx"],"names":["Elements","loadStripe","CheckoutPage","useAppDispatch","useAppSelector","useEffect","useState","agent","setBasket","Loader","history","stripePromise","CheckoutWrapper","dispatch","loading","setLoading","state","basket","items","length","push","Payment","createPaymentIntent","then","catch","error","console","log","finally"],"mappings":"6GAAA,OAASA,QAAT,KAAyB,yBAAzB,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,gCAA/C,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,OAAT,KAAwB,OAAxB,C,2CAGA,GAAMC,CAAAA,aAAa,CAACV,UAAU,CAAC,6GAAD,CAA9B,CACA,cAAe,SAASW,CAAAA,eAAT,EAA2B,CACxC,GAAMC,CAAAA,QAAQ,CAACV,cAAc,EAA7B,CACA,cAA8BG,QAAQ,CAAC,IAAD,CAAtC,wCAAOQ,OAAP,eAAgBC,UAAhB,eACA,oBAAeX,cAAc,CAAC,SAAAY,KAAK,QAAEA,CAAAA,KAAK,CAACC,MAAR,EAAN,CAA7B,CAAOA,MAAP,iBAAOA,MAAP,CAEAZ,SAAS,CAAC,UAAM,CAEd,GAAG,CAACY,MAAD,EAAWA,MAAM,CAACC,KAAP,CAAaC,MAAb,GAAsB,CAApC,CAAsC,CACpCT,OAAO,CAACU,IAAR,CAAa,UAAb,EACA,OACD,CACFb,KAAK,CAACc,OAAN,CAAcC,mBAAd,GACCC,IADD,CACM,SAAAN,MAAM,QAAEJ,CAAAA,QAAQ,CAACL,SAAS,CAACS,MAAD,CAAV,CAAV,EADZ,EAECO,KAFD,CAEO,SAAAC,KAAK,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAF,EAFZ,EAGCG,OAHD,CAGS,iBAAIb,CAAAA,UAAU,CAAC,KAAD,CAAd,EAHT,EAKA;AACA,CAZQ,CAYN,CAACF,QAAD,CAZM,CAAT,CAeA,GAAGC,OAAH,CAAW,mBAAO,KAAC,MAAD,EAAQ,OAAO,CAAC,mBAAhB,EAAP,CACX,mBACE,KAAC,QAAD,EAAU,MAAM,CAAEH,aAAlB,uBACI,KAAC,YAAD,IADJ,EADF,CAKD","sourcesContent":["import { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport CheckoutPage from \"./CheckoutPage\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { useEffect, useState } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { setBasket } from \"../basket/basketSlice\";\r\nimport Loader from \"../../app/layout/Loader\";\r\nimport { history } from \"../..\";\r\n\r\n\r\nconst stripePromise=loadStripe('pk_test_51NLvadLRCdXbPQVRmp4hVGpvcZFMegnlrLgyVKkMZMVeLAFQqvhjEqfYZv0rwrKV2JmnYZLstWwaKqXxkXB0zliB00a2rpjr3s');\r\nexport default function CheckoutWrapper() {\r\n  const dispatch=useAppDispatch();\r\n  const [loading, setLoading] = useState(true);\r\n  const {basket}=useAppSelector(state=>state.basket);\r\n\r\n  useEffect(() => {\r\n\r\n    if(!basket || basket.items.length===0){\r\n      history.push('../login');\r\n      return;\r\n    }\r\n   agent.Payment.createPaymentIntent()\r\n   .then(basket=>dispatch(setBasket(basket)))\r\n   .catch(error=>console.log(error))\r\n   .finally(()=>setLoading(false));\r\n\r\n   //eslint-disable-next-line\r\n  }, [dispatch])\r\n  \r\n\r\n  if(loading)return <Loader message=\"Loading check out\"/>\r\n  return (\r\n    <Elements stripe={stripePromise}>\r\n        <CheckoutPage/>\r\n    </Elements>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}